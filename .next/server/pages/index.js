(()=>{var t={};t.id=332,t.ids=[220,332,636],t.modules={237:(t,e)=>{"use strict";Object.defineProperty(e,"A",{enumerable:!0,get:function(){return r}});var r=function(t){return t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE",t.IMAGE="IMAGE",t}({})},361:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1413:(t,e)=>{"use strict";Object.defineProperty(e,"M",{enumerable:!0,get:function(){return function t(e,r){return r in e?e[r]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,r)):"function"==typeof e&&"default"===r?e:void 0}}})},2015:t=>{"use strict";t.exports=require("react")},2768:()=>{},2836:t=>{t.exports={container:"Search_container__2EVsC"}},3873:t=>{"use strict";t.exports=require("path")},4219:(t,e,r)=>{"use strict";r.r(e),r.d(e,{config:()=>B,default:()=>T,getServerSideProps:()=>I,getStaticPaths:()=>D,getStaticProps:()=>q,reportWebVitals:()=>J,routeModule:()=>V,unstable_getServerProps:()=>$,unstable_getServerSideProps:()=>F,unstable_getStaticParams:()=>W,unstable_getStaticPaths:()=>U,unstable_getStaticProps:()=>R});var n={};r.r(n),r.d(n,{default:()=>G,getStaticProps:()=>H});var a=r(3885),c=r(237),o=r(1413),i=r(9674),s=r(7522),l=r(8732),u=r(2015),d={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},p=u.createContext&&u.createContext(d),f=["attr","size","title"];function h(){return(h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach(function(e){var n,a,c;n=t,a=e,c=r[e],(a=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(a))in n?Object.defineProperty(n,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[a]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function y(t){return e=>u.createElement(m,h({attr:v({},t.attr)},e),function t(e){return e&&e.map((e,r)=>u.createElement(e.tag,v({key:r},e.attr),t(e.child)))}(t.child))}function m(t){var e=e=>{var r,{attr:n,size:a,title:c}=t,o=function(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(n=0;n<c.length;n++)r=c[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}(t,f),i=a||e.size||"1em";return e.className&&(r=e.className),t.className&&(r=(r?r+" ":"")+t.className),u.createElement("svg",h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,o,{className:r,style:v(v({color:t.color||e.color},e.style),t.style),height:i,width:i,xmlns:"http://www.w3.org/2000/svg"}),c&&u.createElement("title",null,c),t.children)};return void 0!==p?u.createElement(p.Consumer,null,t=>e(t)):e(d)}function b(t){return y({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function j(t){return y({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"},child:[]}]})(t)}function x(t){return y({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zm151 118.3C226 97.7 269.5 80 320 80c65.2 0 118.8 29.6 159.9 67.7C518.4 183.5 545 226 558.6 256c-12.6 28-36.6 66.8-70.9 100.9l-53.8-42.2c9.1-17.6 14.2-37.5 14.2-58.7c0-70.7-57.3-128-128-128c-32.2 0-61.7 11.9-84.2 31.5l-46.1-36.1zM394.9 284.2l-81.5-63.9c4.2-8.5 6.6-18.2 6.6-28.3c0-5.5-.7-10.9-2-16c.7 0 1.3 0 2 0c44.2 0 80 35.8 80 80c0 9.9-1.8 19.4-5.1 28.2zm9.4 130.3C378.8 425.4 350.7 432 320 432c-65.2 0-118.8-29.6-159.9-67.7C121.6 328.5 95 286 81.4 256c8.3-18.4 21.5-41.5 39.4-64.8L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5l-41.9-33zM192 256c0 70.7 57.3 128 128 128c13.3 0 26.1-2 38.2-5.8L302 334c-23.5-5.4-43.1-21.2-53.7-42.3l-56.1-44.2c-.2 2.8-.3 5.6-.3 8.5z"},child:[]}]})(t)}var P=r(5646),S=r.n(P);let O=function({setContacts:t,name:e,phone:r,_id:n}){let[a,c]=(0,u.useState)(e),[o,i]=(0,u.useState)(r),[s,d]=(0,u.useState)(!1),[p,f]=(0,u.useState)(!1);async function h(){if(a&&o)try{f(!0);let e=await fetch(`/api/${n}`,{method:"PATCH",body:JSON.stringify({nameInp:a,phoneInp:o}),headers:{"Content-Type":"application/json"}});200==e.status&&(t(t=>t.map(t=>(t._id==n&&(t.name=a,t.phone=o),t))),d(!1))}catch(t){console.log(t.message)}finally{f(!1)}else alert("please fill in inputs correctly ")}async function g(){if(confirm("Are you sure ?"))try{f(!0);let e=await fetch(`/api/${n}`,{method:"DELETE"});200==e.status&&t(t=>t.filter(t=>t._id!=n))}catch(t){console.log(t.message)}finally{f(!1)}}return(0,l.jsxs)("div",{className:S().container,children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{children:[e," ",p&&" - Loading ..."]}),(0,l.jsx)("p",{children:r}),s&&(0,l.jsxs)("div",{className:S().edit,children:[(0,l.jsx)("input",{type:"text",value:a,onChange:t=>c(t.target.value)}),(0,l.jsx)("input",{type:"text",value:o,onChange:t=>i(t.target.value)}),(0,l.jsx)("button",{onClick:h,children:"Save"})]})]}),(0,l.jsxs)("div",{className:S().buttons,children:[(0,l.jsx)("button",{onClick:()=>d(t=>!t),children:s?(0,l.jsx)(x,{}):(0,l.jsx)(b,{})}),(0,l.jsx)("button",{onClick:g,children:(0,l.jsx)(j,{})})]})]})};var C=r(7669),_=r.n(C),w=r(2836),M=r.n(w);let A=function({setContacts:t,allContacts:e}){let[r,n]=(0,u.useState)(""),[a,c]=(0,u.useState)(!1);async function o(){try{c(!0);let e=await fetch(`/api/search/${r}`),n=await e.json();t(n)}catch(t){console.log(t.message)}finally{c(!1)}}return(0,l.jsxs)("div",{className:M().container,children:[(0,l.jsx)("input",{type:"text",placeholder:"Search...",value:r,onChange:t=>n(t.target.value)}),(0,l.jsx)("button",{onClick:o,children:a?"Loading...":"search"})]})},E=function({contacts:t,setContacts:e,allContacts:r}){let[n,a]=(0,u.useState)(""),[c,o]=(0,u.useState)(""),[i,s]=(0,u.useState)(!1);async function d(){if(n&&c){s(!0);try{let t=await fetch("/api/contact",{method:"POST",body:JSON.stringify({name:n,phone:c}),headers:{"Content-Type":"application/json"}}),r=await t.json();e(t=>[...t,r]),t.ok&&alert("contact added successfully :)"),a(""),o("")}catch(t){console.log(t)}finally{s(!1)}}}return(0,l.jsxs)("div",{className:_().container,children:[(0,l.jsxs)("div",{className:_().addNew,children:[(0,l.jsx)("input",{type:"text",placeholder:"name",value:n,onChange:t=>a(t.target.value)}),(0,l.jsx)("input",{type:"number",placeholder:"phone number",value:c,onChange:t=>o(t.target.value)}),(0,l.jsx)("button",{onClick:d,children:i?"Loading...":"Add"})]}),(0,l.jsx)(A,{setContacts:e,allContacts:r}),t.length?t.map(t=>(0,l.jsx)(O,{setContacts:e,...t},t._id)):(0,l.jsx)("p",{style:{textAlign:"center",marginTop:"60px"},children:"There is no contact yet"})]})},N=new(require("mongodb")).MongoClient(process.env.MONGO_URI),k=null,L=null;async function z(){try{await N.connect(),L=N.db("contactApp").collection("contacts"),console.log(`
✅ db connected successfully
`)}catch(t){console.log(`
❌ connection error : ${t.message}
`)}}function G({allContacts:t}){let[e,r]=(0,u.useState)([]);return(0,l.jsx)(E,{contacts:e,setContacts:r,allContacts:t})}async function H(){try{await z();let t=await L.find().toArray();return{props:{allContacts:JSON.parse(JSON.stringify(t))},revalidate:100}}catch(t){return console.log(t.message),{notFound:!0}}}let T=(0,o.M)(n,"default"),q=(0,o.M)(n,"getStaticProps"),D=(0,o.M)(n,"getStaticPaths"),I=(0,o.M)(n,"getServerSideProps"),B=(0,o.M)(n,"config"),J=(0,o.M)(n,"reportWebVitals"),R=(0,o.M)(n,"unstable_getStaticProps"),U=(0,o.M)(n,"unstable_getStaticPaths"),W=(0,o.M)(n,"unstable_getStaticParams"),$=(0,o.M)(n,"unstable_getServerProps"),F=(0,o.M)(n,"unstable_getServerSideProps"),V=new a.PagesRouteModule({definition:{kind:c.A.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:s.default,Document:i.default},userland:n})},5646:t=>{t.exports={container:"Card_container__02xFS",edit:"Card_edit__BL9Qw",buttons:"Card_buttons__6O7Ki"}},7522:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var n=r(8732);function a({Component:t,pageProps:e}){return(0,n.jsx)(t,{...e})}r(2768)},7669:t=>{t.exports={container:"HomePage_container__mLUye",addNew:"HomePage_addNew__1HxFi"}},8732:t=>{"use strict";t.exports=require("react/jsx-runtime")},9674:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var n=r(8732),a=r(2341);function c(){return(0,n.jsxs)(a.Html,{lang:"en",children:[(0,n.jsx)(a.Head,{}),(0,n.jsxs)("body",{children:[(0,n.jsx)(a.Main,{}),(0,n.jsx)(a.NextScript,{})]})]})}}};var e=require("../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),n=e.X(0,[341],()=>r(4219));module.exports=n})();